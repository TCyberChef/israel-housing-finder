---
phase: 01-infrastructure-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - vite.config.ts
  - package.json
  - tsconfig.json
  - tsconfig.app.json
  - tsconfig.node.json
  - index.html
  - src/main.tsx
  - src/App.tsx
  - src/vite-env.d.ts
autonomous: true

must_haves:
  truths:
    - "React app builds successfully with Vite TypeScript setup"
    - "Dev server starts without errors"
    - "Base path configured for GitHub Pages subdirectory deployment"
  artifacts:
    - path: "vite.config.ts"
      provides: "Vite build configuration with GitHub Pages base path"
      contains: "base: '/israel-housing-finder/'"
      min_lines: 8
    - path: "package.json"
      provides: "Vite dependencies and build scripts"
      contains: "vite"
    - path: "tsconfig.json"
      provides: "TypeScript configuration"
      contains: "references"
    - path: "src/main.tsx"
      provides: "React entry point"
      exports: []
      min_lines: 5
  key_links:
    - from: "vite.config.ts"
      to: "base path /israel-housing-finder/"
      via: "base config property"
      pattern: "base:\\s*['\"]\/israel-housing-finder\/['\"]"
    - from: "package.json"
      to: "vite scripts"
      via: "build and dev scripts"
      pattern: "vite (build|dev)"
---

<objective>
Migrate from Create React App to Vite with TypeScript for 40x faster builds and modern tooling

Purpose: Replace deprecated react-scripts with Vite as the industry-standard build tool for React. Configure TypeScript for type safety and better developer experience. Set up correct base path for GitHub Pages deployment.

Output: Working Vite + React + TypeScript project that builds and runs locally
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-infrastructure-setup/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Vite and migrate from Create React App</name>
  <files>
    package.json
    vite.config.ts
    index.html
    tsconfig.json
    tsconfig.app.json
    tsconfig.node.json
    src/vite-env.d.ts
  </files>
  <action>
Remove Create React App dependencies and install Vite toolchain:

1. Remove CRA dependencies: `npm uninstall react-scripts gh-pages`
2. Install Vite: `npm install --save-dev vite @vitejs/plugin-react`
3. Install TypeScript tooling: `npm install --save-dev typescript @types/react @types/react-dom`

Create vite.config.ts:
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  base: '/israel-housing-finder/',
})
```

Move public/index.html to root and update:
- Remove %PUBLIC_URL% references
- Change root div script to: `<script type="module" src="/src/main.tsx"></script>`

Create TypeScript configs following Vite react-ts template pattern:
- tsconfig.json: References to app and node configs
- tsconfig.app.json: App-specific settings (target ES2020, lib DOM, jsx react-jsx, strict mode)
- tsconfig.node.json: Build tool settings

Create src/vite-env.d.ts with: `/// <reference types="vite/client" />`

Update package.json scripts:
```json
{
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview"
  }
}
```

Remove homepage field from package.json (no longer needed with Vite base config).
  </action>
  <verify>
Run `npm run build` - should complete successfully and create dist/ folder with assets
  </verify>
  <done>
Build completes without TypeScript or Vite errors, dist/ folder contains index.html and assets
  </done>
</task>

<task type="auto">
  <name>Task 2: Convert JavaScript files to TypeScript</name>
  <files>
    src/main.tsx
    src/App.tsx
    src/App.css
  </files>
  <action>
Rename and convert existing React files to TypeScript:

1. Create src/main.tsx (entry point):
```typescript
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
```

2. Convert src/App.js to src/App.tsx:
```typescript
import './App.css'

function App() {
  return (
    <div className="App">
      <header className="App-header">
        <h1>Israel Housing Finder</h1>
        <p>Coming soon - aggregating rental listings from across Israel</p>
      </header>
    </div>
  )
}

export default App
```

3. Delete old JavaScript files: src/index.js, src/App.js

4. Keep existing CSS files unchanged: src/index.css, src/App.css
  </action>
  <verify>
Run `npm run dev` - dev server should start on http://localhost:5173 and show "Israel Housing Finder" page
  </verify>
  <done>
Dev server runs without errors, page displays correctly with existing styles, no console errors
  </done>
</task>

<task type="auto">
  <name>Task 3: Update .gitignore for Vite</name>
  <files>
    .gitignore
  </files>
  <action>
Update .gitignore to replace CRA patterns with Vite patterns:

Remove CRA-specific:
- /build

Add Vite-specific:
- dist/
- .vite/

Ensure environment variables are excluded:
- .env
- .env.local
- .env.*.local

Keep existing node_modules/ exclusion.
  </action>
  <verify>
Run `git status` - dist/ folder should not appear as untracked even after running `npm run build`
  </verify>
  <done>
.gitignore correctly excludes dist/, .vite/, and .env files. Git status shows no untracked build artifacts.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes successfully
2. `npm run dev` starts dev server without errors
3. dist/ folder contains index.html and assets/ subdirectory
4. vite.config.ts has base: '/israel-housing-finder/'
5. All TypeScript files compile without errors
</verification>

<success_criteria>
- Vite build system replaces Create React App
- TypeScript is configured and working
- Base path is set to /israel-housing-finder/ for GitHub Pages
- Dev server runs on http://localhost:5173
- Build output goes to dist/ folder
- No CRA dependencies remain in package.json
</success_criteria>

<output>
After completion, create `.planning/phases/01-infrastructure-setup/01-01-SUMMARY.md`
</output>
